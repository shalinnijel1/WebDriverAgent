language: objective-c
osx_image: xcode8.3
sudo: false

cache:
  directories:
  - Carthage
  - Inspector/node_modules

install:
- pip install --user azure-cli

script:
  - ./Scripts/bootstrap.sh
  - ./signing/add-key.sh
  - ./build-ipa.sh

after_success:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then az=$HOME/Library/Python/2.7/bin/az; fi
  - $az storage blob upload -f ./out/WebDriverAgent-$TRAVIS_BUILD_NUMBER.zip -c webdriveragent -n WebDriverAgent-$TRAVIS_BUILD_NUMBER.zip
